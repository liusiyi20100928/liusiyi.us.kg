
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>后台录入 - 学生信息</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.min.js"></script>
  <script src="script.js"></script>
</head>
<body>
  <h1>学生信息后台录入</h1>
  <form id="add-form" onsubmit="return addRecord()">
    <input required placeholder="姓名" id="name"><br>
    <input required placeholder="班级" id="class"><br>
    <input required placeholder="手机号" id="phone"><br>
    <input required placeholder="微信" id="weixin"><br>
    <input required placeholder="QQ" id="qq"><br>
    <label>照片：<input type="file" accept="image/*" id="photo"></label><br>
    <button type="submit">保存记录</button>
  </form>
  <script>
  function addRecord(){
    const arr = loadData();
    const name  = document.getElementById('name').value.trim();
    const cls   = document.getElementById('class').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const wx    = document.getElementById('weixin').value.trim();
    const qq    = document.getElementById('qq').value.trim();
    const file  = document.getElementById('photo').files[0];
    if (!file) { alert('请上传照片'); return false; }
    const reader = new FileReader();
    reader.onload = ()=>{
      arr.push({ name, cls, phone, wx, qq, photo: reader.result });
      saveData(arr);
      alert('保存成功');
      document.getElementById('add-form').reset();
    };
    reader.readAsDataURL(file);
    return false;
  }
  </script>
</body>
</html>
